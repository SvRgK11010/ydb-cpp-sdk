service: cc
title: Third party components
arcanum:
  review:
    disabling_policy: denied
    groups:
      - name: reviewers
        roles: [ "cc:duty", "cc:developer" ]
    rules:
      - reviewers:
          - name: reviewers
            assign: 1
            ship: 1

ci:
  secret: sec-01e0d4agf6pfvwdjwxp61n3fvg
  runtime:
    sandbox-owner: DEVTOOLS-LARGE
  autocheck:
    native-builds:
      default-win-x86_64-debug:
        - contrib/go
        - contrib/libs/ImageMagick
        - contrib/libs/apache
        - contrib/libs/aws-sdk-cpp/aws-cpp-sdk-core
        - contrib/libs/bdb
        - contrib/libs/blake2
        - contrib/libs/c-ares
        - contrib/libs/cairo
        - contrib/libs/cctz
        - contrib/libs/ctemplate
        - contrib/libs/curl
        - contrib/libs/dokany/dokan
        - contrib/libs/dokany/dokan_fuse
        - contrib/libs/fastops
        - contrib/libs/gdal
        - contrib/libs/gdk-pixbuf
        - contrib/libs/geos
        - contrib/libs/giflib
        - contrib/libs/harfbuzz
        - contrib/libs/icu
        - contrib/libs/lcms2
        - contrib/libs/libarchive
        - contrib/libs/libde265
        - contrib/libs/libevent
        - contrib/libs/libheif
        - contrib/libs/libiconv
        - contrib/libs/libidn
        - contrib/libs/libidn2
        - contrib/libs/libjpeg-turbo
        - contrib/libs/libmysql_r
        - contrib/libs/libmysql_r/strings/uca9dump/bin
        - contrib/libs/libogg
        - contrib/libs/libpng
        - contrib/libs/libpq
        - contrib/libs/libpqxx
        - contrib/libs/libraw
        - contrib/libs/librsvg
        - contrib/libs/libunistring
        - contrib/libs/libvpx
        - contrib/libs/libx265
        - contrib/libs/llvm12
        - contrib/libs/llvm14
        - contrib/libs/mecab
        - contrib/libs/minizip
        - contrib/libs/mozjpeg
        - contrib/libs/opencv
        - contrib/libs/openjpeg
        - contrib/libs/opus
        - contrib/libs/pixman
        - contrib/libs/postgresql
        - contrib/libs/proj
        - contrib/libs/protoc
        - contrib/libs/protoc_std
        - contrib/libs/rocksdb
        - contrib/libs/speex
        - contrib/libs/sqlite3
        - contrib/libs/subversion
        - contrib/libs/tf/tensorflow/lite
        - contrib/libs/tlsh
        - contrib/libs/webrtc
        - contrib/libs/zlib
        - contrib/python/MySQL-python
        - contrib/python/ipython
        - contrib/python/mypy-protobuf/bin/protoc-gen-mypy/bin
        - contrib/python/pycrypto
        - contrib/restricted/abseil-cpp
        - contrib/restricted/glib
        - contrib/restricted/googletest/googlemock
        - contrib/restricted/googletest/googletest
        - contrib/restricted/http-parser
        - contrib/restricted/thrift
        - contrib/restricted/uriparser
        - contrib/tests/subvertpy
        - contrib/tools/bison
        - contrib/tools/flatc/bin
        - contrib/tools/flatc64/bin
        - contrib/tools/gperf
        - contrib/tools/grpc_cli
        - contrib/tools/protoc/bin
        - contrib/tools/protoc/plugins/cpp_styleguide/bin
        - contrib/tools/protoc/plugins/grpc_cpp/bin
        - contrib/tools/protoc/plugins/grpc_java/bin
        - contrib/tools/protoc/plugins/grpc_python/bin
        - contrib/tools/protoc_std
        - contrib/tools/python
        - contrib/tools/python/bootstrap/bin
        - contrib/tools/python3/pycc/bin
        - contrib/tools/ragel5
        - contrib/tools/ragel6/bin
        - contrib/tools/watchman
        - contrib/tools/yasm/bin

  actions:
    check_pr-flow:
      title: Contrib Quarantine Check  # Название в merge-требованиях в PR
      flow: check_contrib-flow
      triggers:
        - on: pr # Запускать при обновлении пулл-реквеста
          into: trunk

  flows:
    check_contrib-flow:
      title: PR check
      jobs:
        check-revision:
          title: PR check
          task: common/misc/run_command # Описание задачи (https://a.yandex-team.ru/arc/trunk/arcadia/ci/registry/common/misc/run_command.yaml)
          attempts:
            max: 5
            backoff: exp
            initial-backoff: 30s
            max-backoff: 5m
            if-output: ${state.return_code != `4`}
          input:
            config:
              fixed_sandbox_resources:
                - key: mr_bin
                  resource_id: 3263242702

              secret_environment_variables:
                - key: ARC_TOKEN
                  secret_spec:
                    key: arc_token

                - key: YT_TOKEN
                  secret_spec:
                    key: yt_token

                - key: GITHUB_TOKEN
                  secret_spec:
                    key: github_token

              cmd_line: |
                {mr_bin} \
                  --revision-id ${context.target_revision.hash} \
                  --pr-id ${context.launch_pull_request_info.pull_request.id} \
                  --rule-violation-exit-code 4 \
                  clickhouse java python remaining
